<section>
  <div class="container px-5 mt-5">
    <div class="row">
      <div class="col-md-6 m-auto">
        <h1 class="text-center">Login</h1>
        <form action="/login" method="POST" onsubmit="return validateForm()">
          {{#if loginErr}}
          <p class="error text-danger">{{loginErr}}</p>
          {{/if}}

          <label for="email" class="form-label">Email</label>
          <input type="email" class="form-control" name="Email" autocomplete="off" placeholder="Email" id="email">

          <label for="password" class="form-label">Password</label>
          <input type="password" class="form-control" name="password" autocomplete="new-password" placeholder="Password"
            id="password">
          <input type="checkbox" onclick="togglePassword()"> Show Password <br>

          <a href="/forgot-password" style="text-decoration: none;">Forgot Password?</a><br>
          <br>
          <a href="/signup" style="text-decoration: none;">Create new account?</a><br>

          <button type="submit" class="btn btn-success mt-4">Submit</button>
        </form>

        <p id="errorMessages" style="color: red;"></p>
      </div>
    </div>
  </div>
</section>

<script>
  function togglePassword() {
    var x = document.getElementById("password");
    x.type = x.type === "password" ? "text" : "password";
  }

  function validateForm() {
    var email = document.getElementById("email").value.trim();
    var password = document.getElementById("password").value.trim();
    var errorMessages = "";

    var emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,}$/i;
    if (!email || !emailPattern.test(email)) {
      errorMessages += "Please enter a valid email address.<br>";
    }

    if (password.length < 4) {
      errorMessages += "Password must be at least 5 characters long.<br>";
    }

    if (errorMessages) {
      document.getElementById("errorMessages").innerHTML = errorMessages;
      return false;
    }
  }
</script>